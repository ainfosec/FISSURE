<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Development &mdash; FISSURE  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="About" href="about.html" />
    <link rel="prev" title="Operation" href="operation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            FISSURE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="operation.html">Operation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#built-with">Built With</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-dashboard">Modifying Dashboard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#qtdesigner">QtDesigner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dashboard-frontend">Dashboard Frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="#signals-and-slots">Signals and Slots</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dashboard-backend">Dashboard Backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="#callbacks">Callbacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#common-qt-widget-operations">Common Qt Widget Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generic-input-dialogs">Generic Input Dialogs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#style-sheets">Style Sheets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-custom-options">Adding Custom Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attack-flow-graphs">Attack Flow Graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attack-python-scripts">Attack Python Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inspection-flow-graphs">Inspection Flow Graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-triggers">Creating Triggers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FISSURE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Development</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/development.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="development">
<h1>Development<a class="headerlink" href="#development" title="Link to this heading">¶</a></h1>
<p>This section will explain what it takes to edit the code for FISSURE so you can make your own improvements. FISSURE is intended to make edits easy for the user and the developers want to hear improvement ideas to the interface as well as any new code that you want to share for the project.</p>
<section id="built-with">
<h2>Built With<a class="headerlink" href="#built-with" title="Link to this heading">¶</a></h2>
<p>The following software tools are used to edit the different aspects of FISSURE.</p>
<p><strong>Read the Docs</strong></p>
<p>To regenerate the offline HTML RTD documentation:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>~/FISSURE/docs/RTD
<span class="gp">$ </span>make<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>html
</pre></div>
</div>
<p>The updated html pages will be found in the <code class="docutils literal notranslate"><span class="pre">./docs/RTD/_build/html/pages/</span></code> folder. It is helpful when suggesting changes to the developers or when making pull requests to share the updated text snippets or the .rst files located in <code class="docutils literal notranslate"><span class="pre">./docs/RTD/pages/</span></code> in their entirety.</p>
<p><strong>Git</strong></p>
<p>To submit changes for FISSURE, clone the git repository with the SSH address to avoid errors when doing a push later on. Generate an SSH key and add it to your GitHub access settings by following the installation instructions.</p>
<p>FISSURE contains many git submodules linked to online repositories for downloading GNU Radio out-of-tree modules. To add a new git submodule to the FISSURE git project the following command is needed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>submodule<span class="w"> </span>add<span class="w"> </span>-b<span class="w"> </span>maint-3.8<span class="w"> </span>https://github.com/someone/gr-something.git<span class="w"> </span>./Custom_Blocks/maint-3.8/gr-something
</pre></div>
</div>
<p>To copy git submodules in bulk from one project to another the following steps can be performed, but keep in mind it may be easier to add them individually with the command listed above to avoid errors with more complicated project configurations.</p>
<ol class="arabic simple">
<li><p>Get rid of the files in each OOT module folder except .git</p></li>
<li><p>Copy the modules folder <code class="docutils literal notranslate"><span class="pre">.git/</span></code></p></li>
<li><p>Copy the submodule lines in <code class="docutils literal notranslate"><span class="pre">.git/config</span></code></p></li>
<li><p>Copy the submodule lines in <code class="docutils literal notranslate"><span class="pre">.gitmodules</span></code></p></li>
</ol>
<p><strong>Qt Designer</strong></p>
<p>Qt Designer is used to edit the GUI widgets for the Dashboard and other windows. Existing examples of widgets used with other features can be an excellent guide when making edits for the first time. An important note to recognize is the start of the object name is linked to the style sheets. Styling was removed from the .ui file because it takes precedence over applying changes through the style sheets/View menu items. Refer to the style sheets section below and the .css files in the  <code class="docutils literal notranslate"><span class="pre">./UI/Style_Sheets/</span></code> folder for examples of global and specific styling assignments for widgets.</p>
<p>Python2 branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>python-qt4<span class="w"> </span>qt4-designer
</pre></div>
</div>
<p>Python3 branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>build-essential<span class="w"> </span>qtcreator<span class="w"> </span>qt5-default
</pre></div>
</div>
<p>To launch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>designer
</pre></div>
</div>
<p>Open any .ui file found in the <code class="docutils literal notranslate"><span class="pre">./UI/</span></code> folder to begin editing.</p>
<p><strong>Grip</strong></p>
<p>Grip was previously used for generating html help files from markdown files but it has since been replaced by .rst files and Read the Docs.</p>
<p>Python2 branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>python2<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>grip
</pre></div>
</div>
<p>Python3 branches:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>grip
</pre></div>
</div>
<p>To convert markdown to html (requires Internet connection):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grip<span class="w"> </span>README.md<span class="w"> </span>--export<span class="w"> </span>README.html
</pre></div>
</div>
</section>
<section id="modifying-dashboard">
<h2>Modifying Dashboard<a class="headerlink" href="#modifying-dashboard" title="Link to this heading">¶</a></h2>
<p>This guide will provide examples on how to add GUI elements to the FISSURE Dashboard and interact with those elements within the FISSURE code. The process for editing FISSURE is as follows:</p>
<ol class="arabic simple">
<li><p>Add new widgets to .ui files with Qt Designer</p></li>
<li><p>Connect signals from the widgets to slots</p></li>
<li><p>Messages sent to other components first go to the Dashboard backend</p></li>
<li><p>The Dashboard Backend forwards messages to the HIPRFISR</p></li>
<li><p>The HIPRFISR callbacks handle/forward the message to other components on the network</p></li>
<li><p>The component callbacks handle the message and return status messages and data back to the HIPRFISR callbacks</p></li>
<li><p>The HIPRFISR forwards the status messages to the Dashboard callbacks</p></li>
<li><p>The Dashboard callbacks update the frontend GUI components</p></li>
</ol>
<section id="qtdesigner">
<h3>QtDesigner<a class="headerlink" href="#qtdesigner" title="Link to this heading">¶</a></h3>
<p>Launch QtDesigner with the <cite>designer</cite> command and open the <code class="docutils literal notranslate"><span class="pre">./UI/dashboard.ui</span></code> file to edit the Dashboard. Menu items are stored in the <code class="docutils literal notranslate"><span class="pre">./UI/FissureDashboard.ui</span></code> file and other supporting files can also be found in the same folder.</p>
<img alt="../_images/qtdesigner.png" src="../_images/qtdesigner.png" />
<p><strong>Creating New Widgets</strong></p>
<p>Frequently used widgets:</p>
<ul class="simple">
<li><p>Push Button</p></li>
<li><p>Text Edit</p></li>
<li><p>Combo Box</p></li>
<li><p>Check Box</p></li>
<li><p>Label</p></li>
<li><p>Frame</p></li>
<li><p>Spin Box</p></li>
<li><p>Double Spin Box</p></li>
<li><p>Horizontal Slider</p></li>
<li><p>Table Widget</p></li>
<li><p>Tab Widget</p></li>
<li><p>Stacked Widget</p></li>
<li><p>Tree Widget</p></li>
<li><p>Group Box</p></li>
<li><p>Progress Bar</p></li>
<li><p>List Widget</p></li>
</ul>
<p>Drag widgets onto the Dashboard and modify their property values in the Property Editor.</p>
<p>It is suggested to use an objectName consistent with the following naming convention while also being mindful of the style sheet naming conventions: _widget-type_tab-location_description_ (e.g. pushButton_automation_manual, textEdit_iq_timeslot_input)</p>
<p>Menu items can be added by clicking “Type Here” in any of the menus/submenus and entering text. Separators can be added by clicking “Add Separator” and then dragged or by right clicking and clicking “Insert Separator”. Submenus can be added by clicking the right side of any menu item. There is an issue with Qt Designer adding new menu items after too many have been added. The screen will cut off the bottom of the menu but you can still navigate with the arrow keys and type in new items. To rearrange the items, close Qt Designer and open the .ui file in a text editor to readjust their positions.</p>
</section>
<section id="dashboard-frontend">
<h3>Dashboard Frontend<a class="headerlink" href="#dashboard-frontend" title="Link to this heading">¶</a></h3>
<p>The Dashboard code is separated by Frontend, Backend, UI Components, and Slots. The Frontend code is responsible for the initializing the GUI elements and connecting signals to slots. Each tab has their own initialization function that is called for setting default values and initializing variables. The Frontend also recalls FISSURE settings and launches the Backend code.</p>
</section>
<section id="signals-and-slots">
<h3>Signals and Slots<a class="headerlink" href="#signals-and-slots" title="Link to this heading">¶</a></h3>
<p>When an action is performed on a Qt widget the function that gets called is assigned through connect functions. The <code class="docutils literal notranslate"><span class="pre">connect_slots()</span></code> function calls other connect functions grouped by the different FISSURE tabs and menus. The following is an example of how to connect a widget to a function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">connect_attack_slots</span><span class="p">(</span><span class="n">dashboard</span><span class="p">:</span> <span class="n">Dashboard</span><span class="p">):</span>
    <span class="c1"># Check Box</span>
    <span class="n">dashboard</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">checkBox_attack_show_all</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="k">lambda</span><span class="p">:</span> <span class="n">AttackTabSlots</span><span class="o">.</span><span class="n">_slotAttackProtocols</span><span class="p">(</span><span class="n">dashboard</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Combo Box</span>
    <span class="n">dashboard</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">comboBox_packet_protocols</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="k">lambda</span><span class="p">:</span> <span class="n">AttackTabSlots</span><span class="o">.</span><span class="n">_slotPacketProtocols</span><span class="p">(</span><span class="n">dashboard</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Push Button</span>
    <span class="n">dashboard</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">pushButton_packet_restore_defaults</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="k">lambda</span><span class="p">:</span> <span class="n">AttackTabSlots</span><span class="o">.</span><span class="n">_slotPacketRestoreDefaultsClicked</span><span class="p">(</span><span class="n">dashboard</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">./fissure/Dashboard/Slots/</span></code> folder contains the functions for each FISSURE tab/section. The <cite>dashboard</cite> object passed into each function provides the means to access the .ui objects. Function in other tabs can be access through the <cite>fissure</cite> import item like in this example: <code class="docutils literal notranslate"><span class="pre">fissure.Dashboard.Slots.IQDataTabSlots._slotIQ_LoadIQ_Data(dashboard)</span></code>.</p>
<p>There are two types of slots, synchronous and asynchronous. Synchronous functions execute sequentially while asynchronous functions do not have to block operations. Asynchronous messages are primarily used for functions that work with FISSURE network commands. This ensures other actions can be performed while messages are passed between components. An example of a synchronous and asynchronous slot is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_slotIQ_RecordSigMF_Clicked</span><span class="p">(</span><span class="n">dashboard</span><span class="p">:</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Follows SigMF standard for recording IQ data when enabled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Enabled</span>
    <span class="n">get_filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">dashboard</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">tableWidget_iq_record</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>

<span class="nd">@qasync</span><span class="o">.</span><span class="n">asyncSlot</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_slotIQ_InspectionFG_StartClicked</span><span class="p">(</span><span class="n">dashboard</span><span class="p">:</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Starts the inspection flow graph.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Stop Flow Graph</span>
    <span class="k">if</span> <span class="n">dashboard</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">pushButton_iq_inspection_fg_start</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Stop&quot;</span><span class="p">:</span>
        <span class="c1"># Send Message</span>
        <span class="k">await</span> <span class="n">dashboard</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">inspectionFlowGraphStop</span><span class="p">(</span><span class="n">dashboard</span><span class="o">.</span><span class="n">active_sensor_node</span><span class="p">,</span> <span class="s1">&#39;Flow Graph - GUI&#39;</span><span class="p">)</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
</pre></div>
</div>
</section>
<section id="dashboard-backend">
<h3>Dashboard Backend<a class="headerlink" href="#dashboard-backend" title="Link to this heading">¶</a></h3>
<p>The Dashboard Backend is responsible for network communications to the HIPRFISR (the central hub). It keeps track of heartbeats and incoming messages and also issues outgoing messages. An example of an outgoing message called from the Frontend is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">attackFlowGraphStop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sensor_node_id</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">autorun_index</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends a message to stop a single-stage attack.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send the Message</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hiprfisr_connected</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">PARAMETERS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;sensor_node_id&quot;</span><span class="p">:</span> <span class="n">sensor_node_id</span><span class="p">,</span> <span class="s2">&quot;parameter&quot;</span><span class="p">:</span> <span class="n">parameter</span><span class="p">,</span> <span class="s2">&quot;autorun_index&quot;</span><span class="p">:</span> <span class="n">autorun_index</span><span class="p">}</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">fissure</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">MessageFields</span><span class="o">.</span><span class="n">IDENTIFIER</span><span class="p">:</span> <span class="n">fissure</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">Identifiers</span><span class="o">.</span><span class="n">DASHBOARD</span><span class="p">,</span>
                <span class="n">fissure</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">MessageFields</span><span class="o">.</span><span class="n">MESSAGE_NAME</span><span class="p">:</span> <span class="s2">&quot;attackFlowGraphStop&quot;</span><span class="p">,</span>
                <span class="n">fissure</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">MessageFields</span><span class="o">.</span><span class="n">PARAMETERS</span><span class="p">:</span> <span class="n">PARAMETERS</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">hiprfisr_socket</span><span class="o">.</span><span class="n">send_msg</span><span class="p">(</span><span class="n">fissure</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">MessageTypes</span><span class="o">.</span><span class="n">COMMANDS</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="callbacks">
<h3>Callbacks<a class="headerlink" href="#callbacks" title="Link to this heading">¶</a></h3>
<p>Callbacks are the functions that are executed when a message is received over the network. The callback files are grouped by FISSURE component and are located in <code class="docutils literal notranslate"><span class="pre">./fissure/callbacks/</span></code>. The HIPRFISR callbacks mainly forward the messages to their intended destinations as shown in the example below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">attackFlowGraphStop</span><span class="p">(</span><span class="n">component</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">sensor_node_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">autorun_index</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends message to Sensor Node to stop a running attack flow graph.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Send Message to Sensor Node</span>
    <span class="n">PARAMETERS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;sensor_node_id&quot;</span><span class="p">:</span> <span class="n">sensor_node_id</span><span class="p">,</span> <span class="s2">&quot;parameter&quot;</span><span class="p">:</span> <span class="n">parameter</span><span class="p">,</span> <span class="s2">&quot;autorun_index&quot;</span><span class="p">:</span> <span class="n">autorun_index</span><span class="p">}</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">fissure</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">MessageFields</span><span class="o">.</span><span class="n">IDENTIFIER</span><span class="p">:</span> <span class="n">component</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span>
        <span class="n">fissure</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">MessageFields</span><span class="o">.</span><span class="n">MESSAGE_NAME</span><span class="p">:</span> <span class="s2">&quot;attackFlowGraphStop&quot;</span><span class="p">,</span>
        <span class="n">fissure</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">MessageFields</span><span class="o">.</span><span class="n">PARAMETERS</span><span class="p">:</span> <span class="n">PARAMETERS</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">await</span> <span class="n">component</span><span class="o">.</span><span class="n">sensor_nodes</span><span class="p">[</span><span class="n">sensor_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">send_msg</span><span class="p">(</span><span class="n">fissure</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">MessageTypes</span><span class="o">.</span><span class="n">COMMANDS</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>Callback functions will often reference frequently used functions in its component’s primary code. Component variables and functions can be referenced as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">attackFlowGraphStop</span><span class="p">(</span><span class="n">component</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">sensor_node_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parameter</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">autorun_index</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stop the currently running attack flow graph.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Use the Function that is Called Frequently in SensorNode.py</span>
    <span class="n">component</span><span class="o">.</span><span class="n">attackFlowGraphStop</span><span class="p">(</span><span class="n">sensor_node_id</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">autorun_index</span><span class="p">)</span>
</pre></div>
</div>
<p>Dashboard callbacks can reference GUI elements and functions found in other files like in this example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">flowGraphFinishedIQ</span><span class="p">(</span><span class="n">component</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">sensor_node_id</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Called upon cancelling IQ recording. Changes the status and button text.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Change Status Label and Record Button Text</span>
    <span class="n">component</span><span class="o">.</span><span class="n">frontend</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">label2_iq_status_files</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Not Recording&quot;</span><span class="p">)</span>
    <span class="n">component</span><span class="o">.</span><span class="n">frontend</span><span class="o">.</span><span class="n">statusbar_text</span><span class="p">[</span><span class="n">sensor_node_id</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Not Recording&#39;</span>
    <span class="n">component</span><span class="o">.</span><span class="n">frontend</span><span class="o">.</span><span class="n">refreshStatusBarText</span><span class="p">()</span>

    <span class="c1"># Refresh File List</span>
    <span class="n">IQDataTabSlots</span><span class="o">.</span><span class="n">_slotIQ_RefreshClicked</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">frontend</span><span class="p">)</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
</pre></div>
</div>
</section>
<section id="common-qt-widget-operations">
<h3>Common Qt Widget Operations<a class="headerlink" href="#common-qt-widget-operations" title="Link to this heading">¶</a></h3>
<p>Any widget in the Dashboard can be referenced with <code class="docutils literal notranslate"><span class="pre">dashboard.ui.objectName</span></code> or <code class="docutils literal notranslate"><span class="pre">component.frontend.ui.objectName</span></code>.</p>
<p>The following are frequently called public functions for the widgets in FISSURE. They are listed as <code class="docutils literal notranslate"><span class="pre">self.objectName</span></code> for simplicity:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Push<span class="w"> </span>Button
<span class="go">self.pushButton_name.text()</span>
<span class="go">self.pushButton_name.setText(&quot;Text&quot;)</span>
<span class="go">self.pushButton_name.setEnabled(False)</span>
<span class="go">self.pushButton_name.setVisible(True)</span>

<span class="gp"># </span>Text<span class="w"> </span>Edit
<span class="go">str(self.textEdit_name.toPlainText())</span>
<span class="go">self.textEdit_name.setPlainText(&quot;Text&quot;)</span>

<span class="gp"># </span>Combo<span class="w"> </span>Box
<span class="go">str(self.comboBox_name.currentText())</span>
<span class="go">self.comboBox_name.clear()</span>
<span class="go">self.comboBox_name.addItem(get_dissector)</span>
<span class="go">self.comboBox_name.addItems(get_packet_types)</span>
<span class="go">self.comboBox_name.setCurrentIndex(0)</span>
<span class="go">self.comboBox_name.currentIndex(0)</span>

<span class="gp"># </span>Check<span class="w"> </span>Box
<span class="go">self.checkBox_name.isChecked()</span>
<span class="go">self.checkBox_name.setChecked(False)</span>

<span class="gp"># </span>Label
<span class="go">self.label_name.text()</span>
<span class="go">self.label_name.setText(get_samples)</span>
<span class="go">self.label_name.setPixmap(QtGui.QPixmap(os.path.dirname(os.path.realpath(__file__)) + &quot;/docs/Icons/USRP_X310.png&quot;))</span>

<span class="gp"># </span>Frame
<span class="go">self.frame_name.pos()</span>
<span class="go">self.frame_name.geometry()</span>

<span class="gp"># </span>Spin<span class="w"> </span>Box/Double<span class="w"> </span>Spin<span class="w"> </span>Box
<span class="go">self.spinBox_name.value()</span>
<span class="go">self.spinBox_name.setValue(10)</span>
<span class="go">self.spinBox_name.setMaximum(35)</span>
<span class="go">self.spinBox_name.setMinimum(0)</span>

<span class="gp"># </span>Horizontal/Vertical<span class="w"> </span>Slider
<span class="go">self.horizontalSlider_name.setMinimum(int(win_min))</span>
<span class="go">self.horizontalSlider_name.setMaximum(int(win_max))</span>
<span class="go">self.horizontalSlider_name.setValue(int(win_min))</span>
<span class="go">self.horizontalSlider_name.setSliderPosition(2)</span>

<span class="gp"># </span>Table<span class="w"> </span>Widget
<span class="go">self.tableWidget_name.rowCount()</span>
<span class="go">self.tableWidget_name.columnCount()</span>
<span class="go">self.tableWidget_name.setColumnCount(1)</span>
<span class="go">self.tableWidget_name.setRowCount(0)</span>
<span class="go">self.tableWidget_name.removeRow(1)</span>
<span class="go">self.tableWidget_name.removeColumn(5)</span>
<span class="go">self.tableWidget_name.insertRow(0)</span>
<span class="go">self.tableWidget_name.currentRow()</span>
<span class="go">self.tableWidget_name.clearContents()</span>
<span class="go">self.tableWidget_name.resizeRowsToContents()</span>
<span class="go">self.tableWidget_name.resizeColumnsToContents()</span>
<span class="go">self.tableWidget_name.setColumnWidth(4,130)</span>
<span class="go">self.tableWidget_name.horizontalHeader().setResizeMode(2,QtGui.QHeaderView.Stretch)</span>
<span class="go">self.tableWidget_name.horizontalHeader().setStretchLastSection(True)</span>
<span class="go">self.tableWidget_name.verticalHeaderItem(0).text()</span>
<span class="go">self.tableWidget_name.setHorizontalHeaderItem(1,QtGui.QTableWidgetItem(&quot;&quot;))</span>
<span class="go">self.tableWidget_name.item(0,5).text()</span>
<span class="go">self.tableWidget_name.setCurrentCell(self.tableWidget_name.currentRow()-1,0)</span>
<span class="go">table_item = self.tableWidget_name.takeItem(self.tableWidget_name.currentRow()-1,0)</span>
<span class="go">table_item = QtGui.QTableWidgetItem(str(657))  # from PyQt4 import QtCore, QtGui, uic</span>
<span class="go">table_item.setTextAlignment(QtCore.Qt.AlignCenter)</span>
<span class="go">table_item.setFlags(table_item.flags() &amp; ~QtCore.Qt.ItemIsEditable)</span>
<span class="go">self.tableWidget_name.setItem(0,0,table_item)</span>
<span class="go">self.tableWidget_name.item(row,4).setFlags(self.tableWidget_name.item(row,4).flags() ^ QtCore.Qt.ItemIsEnabled)</span>
<span class="go">self.tableWidget_name.cellWidget(0,4).currentText()</span>
<span class="go">self.tableWidget_name.cellWidget(1,0).isChecked()</span>
<span class="go">self.tableWidget_name.cellWidget(row,0).isEnabled()</span>
<span class="go">self.tableWidget_name.cellWidget(row,0).setCurrentIndex(1)</span>
<span class="go">self.tableWidget_name.setCellWidget(0,0,new_button)</span>

<span class="go">new_checkbox = QtGui.QCheckBox(&quot;&quot;,self)</span>
<span class="gp">new_checkbox.setStyleSheet(&quot;margin-left:17%</span><span class="s2">&quot;)</span>
<span class="go">self.tableWidget_name.setCellWidget(n,0,new_checkbox)</span>

<span class="go">new_pushbutton = QtGui.QPushButton(self.table_list[n])</span>
<span class="go">new_pushbutton.setText(&quot;Guess&quot;)</span>
<span class="go">new_pushbutton.setFixedSize(64,23)</span>
<span class="go">self.tableWidget_name.setCellWidget(self.tableWidget_name.rowCount()-1,1,new_pushbutton)</span>
<span class="go">new_pushbutton.clicked.connect(lambda: self._slotGuessInterfaceTableClicked(get_value))</span>

<span class="gp"># </span>Tab<span class="w"> </span>Widget
<span class="go">self.tabWidget_name.currentIndex()</span>
<span class="go">self.tabWidget_name.setCurrentIndex(4)</span>
<span class="go">self.tabWidget_name.tabText(self.tabWidget_name.currentIndex())</span>
<span class="go">self.tabWidget_name.setTabText(0,&quot;Detector&quot;)</span>
<span class="go">self.tabWidget_name.setTabToolTip(1,&quot;Target Signal Identification&quot;)</span>
<span class="go">self.tabWidget_name.setTabEnabled(2,False)</span>
<span class="go">self.tabWidget_name.count()</span>
<span class="go">self.tabWidget_name.removeTab(1)</span>
<span class="go">new_tab = QtGui.QWidget()</span>
<span class="go">vBoxlayout  = QtGui.QVBoxLayout()</span>
<span class="go">vBoxlayout.addWidget(self.table_name)</span>
<span class="go">new_tab.setLayout(vBoxlayout)</span>
<span class="go">self.tabWidget_name.addTab(new_tab,&quot;text&quot;)</span>
<span class="go">get_table = self.tabWidget_name.children()[0].widget(n).children()[1]  # TabWidget&gt;&gt;StackedLayout&gt;&gt;Tab&gt;&gt;Table</span>

<span class="gp"># </span>Stacked<span class="w"> </span>Widget
<span class="go">self.stackedWidget_name.currentIndex()</span>
<span class="go">self.stackedWidget_name.setCurrentIndex(1)</span>
<span class="go">self.stackedWidget_name.count()</span>

<span class="gp"># </span>Tree<span class="w"> </span>Widget
<span class="go">self.treeWidget_name.currentItem().text(0)</span>
<span class="go">self.treeWidget_name.setCurrentItem(self.treeWidget_name.topLevelItem(0))</span>
<span class="go">new_item = QtGui.QTreeWidgetItem()</span>
<span class="go">new_item.setText(0,&quot;text&quot;)</span>
<span class="go">new_item.setDisabled(True)</span>
<span class="go">self.treeWidget_name.addTopLevelItem(new_item)</span>
<span class="go">self.treeWidget_name.clear()</span>
<span class="go">self.treeWidget_name.setHeaderLabel(&quot;text&quot;)</span>
<span class="go">self.treeWidget_name.invisibleRootItem()</span>
<span class="go">self.treeWidget_name.collapseAll()</span>
<span class="go">self.treeWidget_name.expandAll()</span>
<span class="go">self.treeWidget_name.findItems(&quot;text&quot;,QtCore.Qt.MatchExactly|QtCore.Qt.MatchRecursive,0)[0].setDisabled(False)</span>
<span class="go">self.treeWidget_name.findItems(&quot;text&quot;,QtCore.Qt.MatchExactly|QtCore.Qt.MatchRecursive,0)[0].setHidden(False)</span>
<span class="go">iterator = QtGui.QTreeWidgetItemIterator(self.treeWidget_name)</span>
<span class="go">while iterator.value():</span>
<span class="go">    item = iterator.value()</span>
<span class="go">    if item.text(0) in self.pd_library[&#39;Attack Categories&#39;]:</span>
<span class="go">        item.setFont(0,QtGui.QFont(&quot;Times&quot;, 11, QtGui.QFont.Bold))</span>
<span class="go">    iterator+=1</span>

<span class="gp"># </span>Group<span class="w"> </span>Box
<span class="go">self.groupBox_name.setVisible(False)</span>
<span class="go">self.groupBox_name.setEnabled(False)</span>

<span class="gp"># </span>Progress<span class="w"> </span>Bar
<span class="go">self.progressBar_name.hide()</span>
<span class="go">self.progressBar_name.show()</span>
<span class="go">self.progressBar_name.setMaximum(100)</span>
<span class="go">self.progressBar_name.setValue(10)</span>

<span class="gp"># </span>List<span class="w"> </span>Widget
<span class="go">self.listWidget_name.setCurrentRow(0)</span>
<span class="go">get_index = self.listWidget_name.currentRow()</span>
<span class="go">self.listWidget_name.count()</span>
<span class="go">get_text = str(self.listWidget_name.item(row).text())</span>
<span class="go">self.listWidget_name.addItem(preset_name)</span>
<span class="go">self.listWidget_name.addItems(modulation_list)</span>
<span class="go">for item in self.listWidget_name.selectedItems()</span>
<span class="go">self.listWidget_name.takeItem(self.listWidget_name.row(item))</span>
<span class="go">self.listWidget_name.clear()</span>
</pre></div>
</div>
<p>The following are examples of commonly used connect functions:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Push<span class="w"> </span>Buttons
<span class="go">self.pushButton_tsi_clear_SOI_list.clicked.connect(self._slotTSI_ClearSOI_ListClicked)</span>
<span class="go">self.pushButton_pd_dissectors_construct.clicked.connect(lambda: self._slotPD_DissectorsConstructClicked(preview = False))</span>

<span class="gp"># </span>Check<span class="w"> </span>Boxes
<span class="go">self.checkBox_automation_receive_only.clicked.connect(self._slotAutomationReceiveOnlyClicked)</span>

<span class="gp"># </span>Combo<span class="w"> </span>Boxes
<span class="go">self.comboBox_tsi_detector.currentIndexChanged.connect(self._slotTSI_DetectorChanged)</span>

<span class="gp"># </span>Radio<span class="w"> </span>Buttons
<span class="go">self.radioButton_library_search_binary.clicked.connect(self._slotLibrarySearchBinaryClicked)</span>

<span class="gp"># </span>Double<span class="w"> </span>Spin<span class="w"> </span>Boxes
<span class="go">self.doubleSpinBox_pd_bit_slicing_window_size.valueChanged.connect(self._slotPD_BitSlicingSpinboxWindowChanged)</span>

<span class="gp"># </span>Horizontal<span class="w"> </span>Sliders
<span class="go">self.horizontalSlider_pd_bit_slicing_preamble_stats.valueChanged.connect(self._slotPD_BitSlicingSliderWindowChanged)</span>

<span class="gp"># </span>Table<span class="w"> </span>Widgets
<span class="go">self.tableWidget_automation_scan_options.cellChanged.connect(self._slotAutomationLockSearchBandClicked)</span>
<span class="go">self.tableWidget_pd_bit_slicing_lengths.itemSelectionChanged.connect(self._slotPD_BitSlicingLengthsChanged)</span>
<span class="go">self.tableWidget_pd_bit_slicing_candidate_preambles.cellDoubleClicked.connect(self._slotPD_BitSlicingCandidateDoubleClicked)</span>
<span class="go">self.tableWidget_pd_bit_slicing_packets.horizontalHeader().sectionClicked.connect(self._slotPD_BitSlicingColumnClicked)</span>

<span class="gp"># </span>Labels
<span class="go">self.label_iq_end.mousePressEvent = self._slotIQ_EndLabelClicked</span>

<span class="gp"># </span>List<span class="w"> </span>Widgets
<span class="go">self.listWidget_library_gallery.currentItemChanged.connect(self._slotLibraryGalleryImageChanged)</span>
<span class="go">self.listWidget_library_browse_demod_fgs.itemClicked.connect(self._slotLibraryBrowseDemodFGsClicked)</span>
<span class="go">self.listWidget_iq_inspection_flow_graphs.itemDoubleClicked.connect(self._slotIQ_InspectionFlowGraphClicked)</span>

<span class="gp"># </span>Text<span class="w"> </span>Edits
<span class="go">self.textEdit_iq_start.textChanged.connect(self._slotIQ_StartChanged)</span>

<span class="gp"># </span>Tree<span class="w"> </span>Widgets
<span class="go">self.treeWidget_attack_attacks.itemDoubleClicked.connect(self._slotAttackTemplatesDoubleClicked)</span>

<span class="gp"># </span>Menu<span class="w"> </span>Items
<span class="go">self.actionAll_Options.triggered.connect(self._slotMenuOptionsClicked)</span>

<span class="gp"># </span>Tab<span class="w"> </span>Widgets
<span class="go">self.tabWidget_tsi.currentChanged.connect(self._slotTSI_TabChanged)</span>

<span class="gp"># </span>List<span class="w"> </span>Widget
<span class="go">self.listWidget_options.currentItemChanged.connect(self._slotOptionsListWidgetChanged)</span>
<span class="go">self.listWidget_library_browse_attacks3.itemClicked.connect(self._slotLibraryBrowseAttacksClicked)</span>
<span class="go">self.listWidget_pd_flow_graphs_recommended_fgs.itemDoubleClicked.connect(self._slotPD_DemodulationLoadSelectedClicked)</span>

<span class="gp"># </span>Custom<span class="w"> </span>Signals
<span class="go">self.connect(self, self.signal_PD_Offline, self._slotPD_Offline)</span>
</pre></div>
</div>
</section>
<section id="generic-input-dialogs">
<h3>Generic Input Dialogs<a class="headerlink" href="#generic-input-dialogs" title="Link to this heading">¶</a></h3>
<p>The generic input dialogs are located in <code class="docutils literal notranslate"><span class="pre">./fissure/Dashboard/UI_Components/Qt5.py</span></code>. There are synchronous and asynchronous versions available for most types of dialog. If a message box dialog is part of an asynchronous function, it must have an asynchronous version to prevent errors when launched.</p>
<p>The following are examples of input dialogs:</p>
<p><strong>Asynchronous Yes/No Dialog:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ret = await fissure.Dashboard.UI_Components.Qt5.async_yes_no_dialog(dashboard, &quot;Are you sure?&quot;)</span>
<span class="go">if ret == QtWidgets.QMessageBox.Yes:</span>
<span class="gp">    # </span>Do<span class="w"> </span>Things
<span class="go">    pass</span>
<span class="go">else:</span>
<span class="go">    return</span>
</pre></div>
</div>
<p><strong>Asynchronous OK Dialog:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ret = await fissure.Dashboard.UI_Components.Qt5.async_ok_dialog(dashboard, &quot;Choose an IQ file.&quot;)</span>
</pre></div>
</div>
<p><strong>Synchronous Error/Message Box:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">fissure.Dashboard.UI_Components.Qt5.errorMessage(&quot;Flow Graph was not Found in PD Flow Graph Library!&quot;)</span>
</pre></div>
</div>
<p><strong>Synchronous Text Edit:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">text, ok = QtGui.QInputDialog.getText(self, &#39;Rename&#39;, &#39;Enter new name:&#39;,QtGui.QLineEdit.Normal,get_file)</span>
<span class="go">if ok:</span>
<span class="go">    print text</span>
</pre></div>
</div>
<p><strong>Synchronous ComboBox:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Open<span class="w"> </span>the<span class="w"> </span>Band<span class="w"> </span>Chooser<span class="w"> </span>Dialog
<span class="go">new_label_text = &quot;Choose 4G Band&quot;</span>
<span class="go">new_items = [</span>
<span class="go">    &quot;2&quot;,</span>
<span class="go">    &quot;3&quot;,</span>
<span class="go">    &quot;4&quot;,</span>
<span class="go">    &quot;5&quot;,</span>
<span class="go">    &quot;7&quot;,</span>
<span class="go">    &quot;12&quot;,</span>
<span class="go">    &quot;13&quot;,</span>
<span class="go">    &quot;14&quot;,</span>
<span class="go">    &quot;17&quot;,</span>
<span class="go">    &quot;20&quot;,</span>
<span class="go">    &quot;25&quot;,</span>
<span class="go">    &quot;26&quot;,</span>
<span class="go">    &quot;29&quot;,</span>
<span class="go">    &quot;30&quot;,</span>
<span class="go">    &quot;40&quot;,</span>
<span class="go">    &quot;41&quot;,</span>
<span class="go">    &quot;46&quot;,</span>
<span class="go">    &quot;48&quot;,</span>
<span class="go">    &quot;66&quot;,</span>
<span class="go">    &quot;71&quot;,</span>
<span class="go">]</span>
<span class="go">chooser_dlg = fissure.Dashboard.UI_Components.Qt5.MiscChooser(</span>
<span class="go">    parent=dashboard, label_text=new_label_text, chooser_items=new_items</span>
<span class="go">)</span>
<span class="go">chooser_dlg.show()</span>
<span class="go">chooser_dlg.exec_()</span>

<span class="gp"># </span>Run<span class="w"> </span>the<span class="w"> </span>Script
<span class="go">get_value = chooser_dlg.return_value</span>
<span class="go">if len(get_value) &gt; 0:</span>
<span class="go">    print get_value</span>
</pre></div>
</div>
<p><strong>Synchronous Folder:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Choose<span class="w"> </span>Folder
<span class="go">get_dir = str(QtGui.QFileDialog.getExistingDirectory(self, &quot;Select Directory&quot;))</span>
<span class="go">if len(get_dir) &gt; 0:</span>
<span class="go">    print get_dir</span>
</pre></div>
</div>
<p><strong>Synchronous Open File:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Choose<span class="w"> </span>File
<span class="go">fname = QtGui.QFileDialog.getOpenFileName(None,&quot;Select IQ File...&quot;, default_directory, filter=&quot;All Files (*)&quot;)</span>
<span class="go">if fname != &quot;&quot;:</span>
<span class="go">    print fname</span>
</pre></div>
</div>
<p><strong>Synchronous Save File:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Choose<span class="w"> </span>File
<span class="go">fname = QtGui.QFileDialog.getSaveFileName(None,&quot;Select File...&quot;, default_directory, filter=&quot;All Files (*)&quot;)</span>
<span class="go">if fname != &quot;&quot;:</span>
<span class="go">    print fname</span>
</pre></div>
</div>
</section>
</section>
<section id="style-sheets">
<h2>Style Sheets<a class="headerlink" href="#style-sheets" title="Link to this heading">¶</a></h2>
<p>Style sheets are applied to the Dashboard and its child windows using the style sheets found in the <code class="docutils literal notranslate"><span class="pre">./UI/Style_Sheets/</span></code> folder. There are three files: light, dark, and custom. Each file contains a similar structure where settings can be applied to all widgets of the same type or for specific widgets using their object IDs. Many of the styles are applied to widgets that have object names starting with a specific naming convention. This allows commonly used widget subcategories to have their own styles. Each type of widget has their own unique properties that can be customized.</p>
<p>If possible, avoid hard-coding styling values in the Python code to better manage and organize the styling for FISSURE. Desktop environments will have different appearances for default settings and Qt versions can also have differences. Any style sheet adjustments that need to be made based on operating system will be inserted into the <code class="docutils literal notranslate"><span class="pre">./fissure/Dashboard/Slots/MenuBarSlots.py</span></code> file.</p>
<p>Colors schemes are assigned to the widgets in the style sheets using temporary variables that later get populated with the RGB values for light, dark, and custom modes. The following mappings are used throughout the style sheets:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Mapping</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&#64;color1</p></td>
<td><p>Background</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;color2</p></td>
<td><p>Frame Background</p></td>
</tr>
<tr class="row-even"><td><p>&#64;color3</p></td>
<td><p>Label Background</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;color4</p></td>
<td><p>Label Text</p></td>
</tr>
<tr class="row-even"><td><p>&#64;color5</p></td>
<td><p>Text Edit Background</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;color6</p></td>
<td><p>Button Gradient 1</p></td>
</tr>
<tr class="row-even"><td><p>&#64;color7</p></td>
<td><p>Button Gradient 2</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;color8</p></td>
<td><p>Disabled Gradient 1</p></td>
</tr>
<tr class="row-even"><td><p>&#64;color9</p></td>
<td><p>Disabled Gradient 2</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;color10</p></td>
<td><p>Hover Gradient 1</p></td>
</tr>
<tr class="row-even"><td><p>&#64;color11</p></td>
<td><p>Hover Gradient 2</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;color12</p></td>
<td><p>Button Text</p></td>
</tr>
<tr class="row-even"><td><p>&#64;color13</p></td>
<td><p>Disabled Text</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;icon_path</p></td>
<td><p>Filepath of Icons Folder</p></td>
</tr>
<tr class="row-even"><td><p>&#64;checked_enabled</p></td>
<td><p>File Name of Checked Enabled Checkbox Image</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;checked_disabled</p></td>
<td><p>File Name of Checked Disabled Checkbox Image</p></td>
</tr>
<tr class="row-even"><td><p>&#64;unchecked_enabled</p></td>
<td><p>File Name of Unchecked Enabled Checkbox Image</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;unchecked_disabled</p></td>
<td><p>File Name of Unchecked Disabled Checkbox Image</p></td>
</tr>
<tr class="row-even"><td><p>&#64;down_arrow_enabled</p></td>
<td><p>File Name of Enabled Arrow Down Button Image</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;down_arrow_disabled</p></td>
<td><p>File Name of Disabled Arrow Down Button Image</p></td>
</tr>
<tr class="row-even"><td><p>&#64;up_arrow_enabled</p></td>
<td><p>File Name of Enabled Arrow Up Button Image</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;up_arow_disabled</p></td>
<td><p>File Name of Disabled Arrow Up Button Image</p></td>
</tr>
<tr class="row-even"><td><p>&#64;radio_unchecked_enabled</p></td>
<td><p>File Name of Enabled Unchecked Radio Button Image</p></td>
</tr>
<tr class="row-odd"><td><p>&#64;radio_checked_enabled</p></td>
<td><p>File Name of Enabled Checked Radio Button Image</p></td>
</tr>
<tr class="row-even"><td><p>&#64;menu_hover_padding</p></td>
<td><p>Padding for Menu Hover Text</p></td>
</tr>
</tbody>
</table>
<p>Style Sheet Example:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="c">/*Global*/</span>
<span class="nt">QCheckBox</span><span class="p">{</span>
<span class="w">    </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ubuntu&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">pt</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/*Subcategory*/</span>
<span class="nt">QCheckBox</span><span class="o">[</span><span class="nt">objectName</span><span class="o">^=</span><span class="s2">&quot;checkBox_&quot;</span><span class="o">]</span><span class="p">{</span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="o">@</span><span class="n">color4</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">QCheckBox</span><span class="o">[</span><span class="nt">objectName</span><span class="o">^=</span><span class="s2">&quot;checkBox_&quot;</span><span class="o">]</span><span class="p">:</span><span class="nd">disabled</span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="o">@</span><span class="n">color13</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">QCheckBox</span><span class="o">[</span><span class="nt">objectName</span><span class="o">^=</span><span class="s2">&quot;checkBox_&quot;</span><span class="o">]</span><span class="p">::</span><span class="nd">indicator</span><span class="p">:</span><span class="nd">unchecked</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">image</span><span class="p">:</span><span class="w"> </span><span class="nb">url</span><span class="p">(</span><span class="sx">@icon_path/@unchecked_enabled</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">QCheckBox</span><span class="o">[</span><span class="nt">objectName</span><span class="o">^=</span><span class="s2">&quot;checkBox_&quot;</span><span class="o">]</span><span class="p">::</span><span class="nd">indicator</span><span class="p">:</span><span class="nd">checked</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">image</span><span class="p">:</span><span class="w"> </span><span class="nb">url</span><span class="p">(</span><span class="sx">@icon_path/@checked_enabled</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">QCheckBox</span><span class="o">[</span><span class="nt">objectName</span><span class="o">^=</span><span class="s2">&quot;checkBox_&quot;</span><span class="o">]</span><span class="p">::</span><span class="nd">indicator</span><span class="p">:</span><span class="nd">disabled</span><span class="p">:</span><span class="nd">checked</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">image</span><span class="p">:</span><span class="w"> </span><span class="nb">url</span><span class="p">(</span><span class="sx">@icon_path/@checked_disabled</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">QCheckBox</span><span class="o">[</span><span class="nt">objectName</span><span class="o">^=</span><span class="s2">&quot;checkBox_&quot;</span><span class="o">]</span><span class="p">::</span><span class="nd">indicator</span><span class="p">:</span><span class="nd">disabled</span><span class="p">:</span><span class="nd">unchecked</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">image</span><span class="p">:</span><span class="w"> </span><span class="nb">url</span><span class="p">(</span><span class="sx">@icon_path/@unchecked_disabled</span><span class="p">);</span>
<span class="p">}</span>

<span class="c">/*Specific*/</span>
<span class="nt">QLabel</span><span class="p">#</span><span class="nn">label4_status1</span><span class="p">{</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="o">@</span><span class="n">color4</span><span class="p">;</span>
<span class="w">    </span><span class="k">font</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">pt</span><span class="w"> </span><span class="s2">&quot;Ubuntu&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="adding-custom-options">
<h2>Adding Custom Options<a class="headerlink" href="#adding-custom-options" title="Link to this heading">¶</a></h2>
<p><strong>Options Dialog</strong></p>
<p>Bring up the options dialog in Qt Designer using the <cite>designer</cite> command and then open the <code class="docutils literal notranslate"><span class="pre">FISSURE/UI/options.ui</span></code> file. Click the arrows for the stacked widget (top right) to locate the table where the custom option will be inserted. Double-click on the table and add a new row with the name of the variable. Set the font size to match the other rows with the “Properties&lt;&lt;” button.</p>
<img alt="../_images/options.png" src="../_images/options.png" />
<p><strong>default.yaml</strong></p>
<p>Open <code class="docutils literal notranslate"><span class="pre">FISSURE/YAML/User</span> <span class="pre">Configs/default.yaml</span></code> and insert the variable name and value (fft_size: 4096) for the new option.</p>
<p><strong>Accessing Stored Values</strong></p>
<p>Access the variables throughout the FISSURE code from the backend or other local settings locations such as: <cite>dashboard.backend.settings[‘fft_size’]</cite> or <cite>self.settings[‘fft_size’]</cite>.</p>
</section>
<section id="attack-flow-graphs">
<h2>Attack Flow Graphs<a class="headerlink" href="#attack-flow-graphs" title="Link to this heading">¶</a></h2>
<p><strong>Flow Graph Configuration</strong></p>
<p>A new Python file is generated each time a .grc file is executed in GNU Radio Companion. The format of this auto-generated Python file is used by FISSURE to perform actions like: displaying variable names, starting attacks, changing values for a running flow graph, etc. Editing the Python file may cause FISSURE to not function properly.</p>
<p><em>GUI vs. No GUI</em></p>
<p>Flow graphs are called differently depending on if there is a GUI or not. Flow graphs configured to “No GUI” mode in the “Options” block will be loaded as a Python module prior to runtime and then modify the default variables. The standard start(), wait(), and stop() commands are applied in this case.</p>
<p>Flow graphs with GUIs have their Python files called directly and behave similarly to inspection flow graphs (See <em>Help&gt;&gt;Inspection Flow Graphs</em>). Variables can be changed from the GNU Radio GUI in the form of GUI widgets or as command line arguments from parameter blocks.</p>
<p><em>Options Block (No GUI)</em></p>
<p>Within the “Options” block:</p>
<ul class="simple">
<li><p>“ID” must match the file name</p></li>
<li><p>“Generate Options” must be set to “No GUI”</p></li>
</ul>
<p><em>Special Variables</em></p>
<p>The Dashboard populates certain flow graphs variable names like “ip_address” and “serial” to match the values in the Attack hardware button. These variables must be named correctly in the flow graph to be populated automatically and handled as intended. Refer to other attack flow graphs as examples for how these variables should be utilized.</p>
<p><em>Numerical Strings</em></p>
<p>To help specify that a string variable containing only numerical values is indeed a string and should not to be interpreted as a float, a new variable named “string_variables” can be added to the flow graph. Its value must be a list with the names of the variables to be considered as exceptions: [“variable_name”]</p>
<p>For example:</p>
<img alt="../_images/string_variables.png" src="../_images/string_variables.png" />
<p><strong>Uploading Attack Flow Graph</strong></p>
<p>Attack flow graphs can be added to FISSURE within the <em>Library&gt;Add</em> tab by selecting a protocol and choosing “Attack”. Attacks will be visible within the Attack tree if the “Attack Template Name” is entered properly.</p>
</section>
<section id="attack-python-scripts">
<h2>Attack Python Scripts<a class="headerlink" href="#attack-python-scripts" title="Link to this heading">¶</a></h2>
<p><strong>Creating Python Scripts</strong></p>
<p>Non-GNU Radio attacks can be added to the FISSURE library by uploading specially configured Python (.py) files. A function is needed within the Python script to identify which variables can be modified in the FISSURE Dashboard (<cite>getArguments()</cite>). Those variables are used by the system as command line arguments during execution of the script. All FISSURE branches accept both Python2 and Python3 attack scripts.</p>
<p>FISSURE will parse a variable named “run_with_sudo” set to True or False and set the “Run with sudo” checkbox upon loading the attack in the Single-Stage Attack tab. For multi-stage attacks, this variable is listed in the generated tables and its value is used to run the script with or without sudo. If no variable is found, then Python scripts will rely on the checkbox for single-stage attacks and be run with sudo for multi-stage attacks.</p>
<p>Variables with filepath in their name will automatically generate a file navigation button for tables inside FISSURE. If the filepath contains “/FISSURE/”, the string will be split and appended to the user’s location for FISSURE. This is to make configuring an attack easier by accounting for the current username in filepaths.</p>
<p><em>Scapy Example</em></p>
<p>The following example uses Scapy to send multiple deauthentication frames from a wireless interface. Use the code as a reference for creating future Python scripts.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scapy.all</span> <span class="kn">import</span> <span class="n">Dot11</span><span class="p">,</span><span class="n">Dot11Deauth</span><span class="p">,</span><span class="n">RadioTap</span><span class="p">,</span><span class="n">sendp</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>

<span class="c1">#################################################</span>
<span class="c1">############ Default FISSURE Header ############</span>
<span class="c1">#################################################</span>
<span class="k">def</span> <span class="nf">getArguments</span><span class="p">():</span>
    <span class="n">client</span> <span class="o">=</span> <span class="s1">&#39;00:11:22:33:44:55&#39;</span>        <span class="c1"># Target MAC address</span>
    <span class="n">bssid</span> <span class="o">=</span> <span class="s1">&#39;AA:BB:CC:11:22:33&#39;</span>         <span class="c1"># Access Point MAC address</span>
    <span class="n">iface</span> <span class="o">=</span> <span class="s1">&#39;wlan0&#39;</span>                     <span class="c1"># Wireless interface name</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="mi">1</span>                         <span class="c1"># Wireless channel</span>
    <span class="n">interval</span> <span class="o">=</span> <span class="mf">0.01</span>                     <span class="c1"># Scapy interval</span>
    <span class="n">arg_names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;client&#39;</span><span class="p">,</span><span class="s1">&#39;bssid&#39;</span><span class="p">,</span><span class="s1">&#39;iface&#39;</span><span class="p">,</span><span class="s1">&#39;channel&#39;</span><span class="p">,</span><span class="s1">&#39;interval&#39;</span><span class="p">]</span>
    <span class="n">arg_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">client</span><span class="p">,</span> <span class="n">bssid</span><span class="p">,</span> <span class="n">iface</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">interval</span><span class="p">]</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">arg_names</span><span class="p">,</span><span class="n">arg_values</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="c1"># Default Values</span>
    <span class="n">client</span> <span class="o">=</span> <span class="s1">&#39;00:11:22:33:44:55&#39;</span>        <span class="c1"># Target MAC address</span>
    <span class="n">bssid</span> <span class="o">=</span> <span class="s1">&#39;AA:BB:CC:11:22:33&#39;</span>         <span class="c1"># Access Point MAC address</span>
    <span class="n">iface</span> <span class="o">=</span> <span class="s1">&#39;wlan0&#39;</span>                     <span class="c1"># Wireless interface name</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>                       <span class="c1"># Wireless channel</span>
    <span class="n">interval</span> <span class="o">=</span> <span class="s1">&#39;0.01&#39;</span>                   <span class="c1"># Scapy interval</span>

    <span class="c1"># Accept Command Line Arguments</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">bssid</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">iface</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">interval</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>

<span class="c1">#################################################</span>

    <span class="c1"># Create Frame</span>
    <span class="n">packet</span> <span class="o">=</span> <span class="n">RadioTap</span><span class="p">()</span><span class="o">/</span><span class="n">Dot11</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">addr1</span><span class="o">=</span><span class="n">client</span><span class="p">,</span> <span class="n">addr2</span><span class="o">=</span><span class="n">bssid</span><span class="p">,</span> <span class="n">addr3</span><span class="o">=</span><span class="n">bssid</span><span class="p">)</span><span class="o">/</span><span class="n">Dot11Deauth</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>

    <span class="c1"># Set Monitor Mode and Channel</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;sudo ifconfig &quot;</span> <span class="o">+</span> <span class="n">iface</span> <span class="o">+</span> <span class="s2">&quot; down&quot;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;sudo iwconfig &quot;</span> <span class="o">+</span> <span class="n">iface</span> <span class="o">+</span> <span class="s2">&quot; mode monitor&quot;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;sudo ifconfig &quot;</span> <span class="o">+</span> <span class="n">iface</span> <span class="o">+</span> <span class="s2">&quot; up&quot;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;sudo iwconfig &quot;</span> <span class="o">+</span> <span class="n">iface</span> <span class="o">+</span> <span class="s2">&quot; channel &quot;</span> <span class="o">+</span> <span class="n">channel</span><span class="p">)</span>

    <span class="c1"># Send Frame</span>
    <span class="n">sendp</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="n">iface</span><span class="o">=</span><span class="n">iface</span><span class="p">,</span> <span class="n">inter</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">interval</span><span class="p">),</span> <span class="n">loop</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Uploading Attack Files</strong></p>
<p>Python files can be uploaded to FISSURE within the <em>Library&gt;&gt;Add</em> tab by choosing a protocol and selecting “Attack”. The file type must be set to “Python2 Script” or “Python3 Script” and the file must have a valid .py extension. Attacks added to the library and named with a proper “Attack Template Name” will immediately show up in the Attack tree widget.</p>
</section>
<section id="inspection-flow-graphs">
<h2>Inspection Flow Graphs<a class="headerlink" href="#inspection-flow-graphs" title="Link to this heading">¶</a></h2>
<p>Inspection flow graphs can be added to FISSURE to perform frequently used analysis on live streams from SDRs or directly on prerecorded data files. Flow graph Python files (.py) are called directly with Python2/3 and use the GNU Radio “parameter” block as arguments to the Python call. This enables variables found in blocks that do not utilize callbacks (like IP address or serial number) to be changed prior to runtime. The following are instructions for creating a new inspection flow graph within the <em>IQ Data&gt;&gt;Inspection</em> tab.</p>
<img alt="../_images/inspection1.png" src="../_images/inspection1.png" />
<p><strong>Location</strong></p>
<p>Inspection flow graphs must be placed in the <code class="docutils literal notranslate"><span class="pre">/FISSURE/Flow</span> <span class="pre">Graph</span> <span class="pre">Library/maint-3.10/Inspection</span> <span class="pre">Flow</span> <span class="pre">Graphs/</span></code> or <code class="docutils literal notranslate"><span class="pre">/FISSURE/Flow</span> <span class="pre">Graph</span> <span class="pre">Library/maint-3.10/Inspection</span> <span class="pre">Flow</span> <span class="pre">Graphs/File/</span></code> directories. Refer to other inspection flow graphs as examples when creating new flow graphs.</p>
<p><strong>library.yaml</strong></p>
<p>The names of inspection flow graphs are assigned to Python files within the <em>library.yaml</em> file. Assign names under the applicable hardware type or under “File” if the new flow graph will be used on IQ files.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Inspection Flow Graphs:</span>
<span class="go">     802.11x Adapter:</span>
<span class="go">     - None</span>
<span class="go">     Computer:</span>
<span class="go">     - None</span>
<span class="go">     File:</span>
<span class="go">     - instantaneous_frequency.py</span>
<span class="go">     - signal_envelope.py</span>
<span class="go">     - waterfall.py</span>
<span class="go">     HackRF:</span>
<span class="go">     - instantaneous_frequency_hackrf.py</span>
<span class="go">     - signal_envelope_hackrf.py</span>
<span class="go">     - time_sink_hackrf.py</span>
<span class="go">     - time_sink_1_10_100_hackrf.py</span>
<span class="go">     - waterfall_hackrf.py</span>
</pre></div>
</div>
<p><strong>GNU Radio</strong></p>
<p>The following are helpful tips for configuring the GNU Radio flow graph:</p>
<ul class="simple">
<li><p>The “Options” block ID must match (without the extension) what is entered in the <em>library.yaml</em> file</p></li>
<li><p>Keep the parameter blocks as a string type and apply conversions within other blocks</p></li>
<li><p>Add “QT GUI Chooser” blocks for variables that will be changed during runtime such as frequency and sample rate. Fill out the GUI Hints to make it look nice.</p></li>
<li><p>Follow examples of other flow graphs on how to configure device/IP addresses, serial numbers, and similar arguments for SDR blocks. This will allow FISSURE-specific features like the IQ hardware button to pass information into the flow graph properly.</p></li>
<li><p>Parameter blocks will replace ‘_’ with ‘-’ when using variables names as command line arguments for the flow graph Python call (FISSURE will handle this)</p></li>
<li><p>Enter filepath and sample rate as “filepath” and “sample_rate” in GNU Radio variable names</p></li>
</ul>
<p><strong>Dashboard</strong></p>
<p>Double-click/load an IQ file in the IQ Data tab Data Viewer and enter sample rate and frequency information prior to loading a file-based inspection flow graph. These values will automatically copy over to the table if available.</p>
</section>
<section id="creating-triggers">
<h2>Creating Triggers<a class="headerlink" href="#creating-triggers" title="Link to this heading">¶</a></h2>
<p>There are four major steps in creating a new trigger for use in single-stage attacks, multi-stage attacks, archive replay, and autorun playlists: building the Python script, adding widgets to .ui file in QtDesigner, updating the Triggers Dialog slots, and adding information to the FISSURE library.yaml file.</p>
<p><strong>Scripting</strong></p>
<p>Triggers consist of a Python3 file that accepts input arguments provided by the FISSURE Dashboard and loops until a condition is satisfied. The trigger files are stored in the <code class="docutils literal notranslate"><span class="pre">./Flow</span> <span class="pre">Graph</span> <span class="pre">Library/maint-3.10/Triggers/</span></code> directory. Trigger scripts can call secondary programs like GNU Radio flow graphs and monitor output such as text printed to stdout. A value of 0 is returned if the trigger is successful and -1 if an error was caught. Two examples of trigger scripts are provided below. The first waits until a specific time and the second reads text produced from a flow graph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Choose File</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">dateutil</span> <span class="kn">import</span> <span class="n">parser</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Accept Command Line Arguments</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">trigger_time</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">trigger_time</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">trigger_time</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error accepting trigger time argument. Exiting trigger.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">trigger_time</span><span class="p">:</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">.1</span><span class="p">)</span>

    <span class="k">return</span> <span class="mi">0</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Choose Fileimport sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Accept Command Line Arguments</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">hardware</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">matching_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="c1">#matching_text = &quot;Bits: 01100000100111110000000011111111&quot;</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error accepting X10 demod arguments. Exiting trigger.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="c1"># Choose the Flow Graph</span>
    <span class="k">if</span> <span class="s2">&quot;USRP B2x0&quot;</span> <span class="ow">in</span> <span class="n">hardware</span><span class="p">:</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;/X10_OOK_USRPB2x0_Demod.py&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="c1"># Start the Flow Graph</span>
    <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;python3&quot;</span><span class="p">,</span> <span class="n">filepath</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Iterate over stdout to print the output in real-time</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">readline</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># Print the line without adding additional newline</span>

            <span class="c1"># Check if the match_text is present in the output</span>
            <span class="k">if</span> <span class="n">matching_text</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Match found in stdout. Exiting both programs.&quot;</span><span class="p">)</span>
                <span class="n">process</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>
                <span class="k">return</span> <span class="mi">0</span>
        <span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">process</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">pass</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>QtDesigner</strong></p>
<p>To add a new trigger to the Trigger Options window, first open the triggers.ui file in QtDesigner. Second, insert a new page into the stacked widget and add widgets for user input. Refer to previous pages for examples and be mindful of the start of objectNames adhering to the stylesheet formatting.</p>
<p><strong>Triggers Dialog Slots</strong></p>
<p>The TriggersDialogSlots.py file needs to be updated for a new trigger to handle initialization, populating default values, and formatting accepted parameters. Modify these functions and follow the existing triggers for examples: _slotTriggerChanged(), _slotAddClicked(). Custom slots for widgets can be created but need to be connected in TriggersDialog.py</p>
<p><strong>Library</strong></p>
<p>The library.yaml file stores the default values for triggers and the names/locations of the Python3 scripts that are executed. The following is an example entry into the Triggers dictionary in library.yaml.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Triggers:</span>
<span class="go">    Acoustic:</span>
<span class="go">        Sound Threshold:</span>
<span class="go">            Default Settings:</span>
<span class="go">                    Duration: &#39;0.1&#39;</span>
<span class="go">                    Sample Rate: &#39;44100&#39;</span>
<span class="go">                    Threshold: &#39;0.2&#39;</span>
<span class="go">            File: sound_threshold.py</span>
<span class="go">            Type: Python3 Script</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="operation.html" class="btn btn-neutral float-left" title="Operation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="about.html" class="btn btn-neutral float-right" title="About" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Chris Poore.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>